cd terraform-docker
terraform apply --auto-approve
terraform plan
terraform plan -var ext_port=1880
terraform plan --var-file west.tfvars
terraform destroy --auto-approve
terraform state list
terraform rm random_string.random[1]
terraform output
terraform workspace new dev
terraform workspace new prod
terraform workspace show
terraform workspace list
terraform workspace select dev

curl http://169.254.169.254/latest/meta-data/public-ipv4
########################################################################

resource "docker_container" "nodered_container" {
  count = 1
  name  = join("-", ["nodered",random_string.random[count.index].result])
  image = docker_image.nodered_image.latest
  ports {
    internal = 1880
    # external = 1880
  }
}


output "container-name"{
    value = docker_container.nodered_container[*].name
    description = "Container name"
}

output "IP-Address"{
    value = [for i in docker_container.nodered_container[*]: join(":", [i.ip_address],i.ports[*]["external"])]
    description = "IP address and external port of the container"
}
